--- build.zig.orig	2025-12-22 19:55:44
+++ build.zig	2025-12-22 20:03:01
@@ -56,9 +56,11 @@
     // Main executable
     const exe = b.addExecutable(.{
         .name = "skhd",
-        .root_source_file = b.path("src/main.zig"),
-        .target = target,
-        .optimize = optimize,
+        .root_module = b.createModule(.{
+            .root_source_file = b.path("src/main.zig"),
+            .target = target,
+            .optimize = optimize,
+        }),
     });
 
     const options = b.addOptions();
@@ -94,31 +96,36 @@
     const test_step = b.step("test", "Run unit tests");
 
     // Benchmark executable
-    const bench_exe = b.addExecutable(.{
-        .name = "benchmark",
-        .root_source_file = b.path("src/benchmark.zig"),
-        .target = target,
-        .optimize = .ReleaseFast,
-    });
-    linkFrameworks(bench_exe);
-    addVersionImport(b, bench_exe);
+    // const bench_exe = b.addExecutable(.{
+    //     .name = "benchmark",
+    //     .root_module = b.createModule(.{
+    //         .root_source_file = b.path("src/benchmark.zig"),
+    //         .target = target,
+    //         .optimize = .ReleaseFast,
+    //     }),
+    // });
+    // linkFrameworks(bench_exe);
+    // addVersionImport(b, bench_exe);
 
-    const zbench = b.dependency("zbench", .{
-        .target = target,
-        .optimize = .ReleaseFast,
-    });
-    bench_exe.root_module.addImport("zbench", zbench.module("zbench"));
+    // const zbench = b.dependency("zbench", .{
+    //         .target = target,
+    //         .optimize = .ReleaseFast,
+    //     }),
+    // });
+    // bench_exe.root_module.addImport("zbench", zbench.module("zbench"));
 
-    const bench_cmd = b.addRunArtifact(bench_exe);
-    const bench_step = b.step("bench", "Run benchmarks");
-    bench_step.dependOn(&bench_cmd.step);
+    // const bench_cmd = b.addRunArtifact(bench_exe);
+    // const bench_step = b.step("bench", "Run benchmarks");
+    // bench_step.dependOn(&bench_cmd.step);
 
     // Allocation tracking executable
     const alloc_exe = b.addExecutable(.{
         .name = "skhd-alloc",
-        .root_source_file = b.path("src/main.zig"),
-        .target = target,
-        .optimize = optimize,
+        .root_module = b.createModule(.{
+            .root_source_file = b.path("src/main.zig"),
+            .target = target,
+            .optimize = optimize,
+        }),
     });
     linkFrameworks(alloc_exe);
     addVersionImport(b, alloc_exe);
@@ -135,9 +142,11 @@
 
     // Tests for main.zig
     const exe_unit_tests = b.addTest(.{
-        .root_source_file = b.path("src/main.zig"),
-        .target = target,
-        .optimize = optimize,
+        .root_module = b.createModule(.{
+            .root_source_file = b.path("src/main.zig"),
+            .target = target,
+            .optimize = optimize,
+        }),
     });
     linkFrameworks(exe_unit_tests);
     addVersionImport(b, exe_unit_tests);
@@ -148,9 +157,11 @@
 
     // Tests for tests.zig
     const tests_unit_tests = b.addTest(.{
-        .root_source_file = b.path("src/tests.zig"),
-        .target = target,
-        .optimize = optimize,
+        .root_module = b.createModule(.{
+            .root_source_file = b.path("src/tests.zig"),
+            .target = target,
+            .optimize = optimize,
+        }),
     });
     linkFrameworks(tests_unit_tests);
     addVersionImport(b, exe_unit_tests);
@@ -171,9 +182,11 @@
 
     for (test_files) |test_file| {
         const module_tests = b.addTest(.{
-            .root_source_file = b.path(test_file),
-            .target = target,
-            .optimize = optimize,
+            .root_module = b.createModule(.{
+                .root_source_file = b.path(test_file),
+                .target = target,
+                .optimize = optimize,
+            }),
         });
         linkFrameworks(module_tests);
         addVersionImport(b, module_tests);
