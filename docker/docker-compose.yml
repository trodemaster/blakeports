# GitHub Actions Self-Hosted Runners for Legacy macOS VMs
# Each service represents one GitHub Actions runner instance targeting a specific legacy VM
# Runner configuration is stored in config/runners.json (managed by ghrunner script)

services:
  # ============================================================================
  # Mac OS X 10.5 (Leopard) Runner
  # ============================================================================
  tenfive-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: tenfive-runner
    hostname: tenfive-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=tenfive
      - RUNNER_NAME=tenfive-runner
      - RUNNER_WORKDIR=_work

    volumes:
      # Runner configuration (tokens, IPs, SSH keys, etc.) - managed by ghrunner
      - ./config:/config:ro
      # Persistent work directory
      - runner-work-tenfive:/home/runner/_work

    network_mode: bridge


  # ============================================================================
  # Mac OS X 10.6 (Snow Leopard) Runner
  # ============================================================================
  tensix-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: tensix-runner
    hostname: tensix-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=tensix
      - RUNNER_NAME=tensix-runner
      - RUNNER_WORKDIR=_work

    volumes:
      - ./config:/config:ro
      - runner-work-tensix:/home/runner/_work

    network_mode: bridge


  # ============================================================================
  # Mac OS X 10.7 (Lion) Runner
  # ============================================================================
  tenseven-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: tenseven-runner
    hostname: tenseven-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=tenseven
      - RUNNER_NAME=tenseven-runner
      - RUNNER_WORKDIR=_work

    volumes:
      - ./config:/config:ro
      - runner-work-tenseven:/home/runner/_work

    network_mode: bridge


  # ============================================================================
  # Mac OS X 10.8 (Mountain Lion) Runner
  # ============================================================================
  teneight-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: teneight-runner
    hostname: teneight-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=teneight
      - RUNNER_NAME=teneight-runner
      - RUNNER_WORKDIR=_work

    volumes:
      - ./config:/config:ro
      - runner-work-teneight:/home/runner/_work

    network_mode: bridge


  # ============================================================================
  # Mac OS X 10.9 (Mavericks) Runner
  # ============================================================================
  tennine-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: tennine-runner
    hostname: tennine-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=tennine
      - RUNNER_NAME=tennine-runner
      - RUNNER_WORKDIR=_work

    volumes:
      - ./config:/config:ro
      - runner-work-tennine:/home/runner/_work

    network_mode: bridge


  # ============================================================================
  # Mac OS X 10.10 (Yosemite) Runner
  # ============================================================================
  tenten-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: 2.321.0
    container_name: tenten-runner
    hostname: tenten-runner
    restart: unless-stopped

    environment:
      - RUNNER_ID=tenten
      - RUNNER_NAME=tenten-runner
      - RUNNER_WORKDIR=_work

    volumes:
      - ./config:/config:ro
      - runner-work-tenten:/home/runner/_work

    network_mode: bridge


volumes:
  runner-work-tenfive:
    driver: local
  runner-work-tensix:
    driver: local
  runner-work-tenseven:
    driver: local
  runner-work-teneight:
    driver: local
  runner-work-tennine:
    driver: local
  runner-work-tenten:
    driver: local
