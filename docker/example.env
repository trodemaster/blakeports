# GitHub Actions Self-Hosted Runners for Legacy macOS VMs
# Copy this file to .env and fill in your values

# ============================================================================
# GitHub Repository Configuration (shared across all runners)
# ============================================================================
GITHUB_OWNER=trodemaster
GITHUB_REPO=blakeports

# ============================================================================
# GitHub Actions Runner Version (shared across all runners)
# Check releases at: https://github.com/actions/runner/releases
# ============================================================================
RUNNER_VERSION=2.321.0

# ============================================================================
# Shared SSH Configuration
# ============================================================================
# Username for legacy VM SSH access
LEGACY_USERNAME=admin

# ============================================================================
# Mac OS X 10.5 (Leopard) Runner - tenfive
# ============================================================================
# Fixed hostname for the 10.5 VM (resolved via mDNS/DNS)
LEGACY_TENFIVE_HOSTNAME=tenfive-runner.local

# Unique runner registration token for this instance
# Generate using: gh api repos/$GITHUB_OWNER/$GITHUB_REPO/actions/runners/registration-token --method POST --jq '.token'
# Each runner instance requires its own token (expires in 1 hour)
RUNNER_TOKEN_TENFIVE=

# Container and runner name (optional, defaults shown)
RUNNER_NAME_TENFIVE=tenfive-runner

# Custom labels for this runner (optional)
# Default labels: self-hosted,Linux,docker,ssh-capable,X64,ubuntu-24.04,tenfive
# Add additional labels: CUSTOM_LABELS_TENFIVE=legacy,macos,10-5
CUSTOM_LABELS_TENFIVE=

# ============================================================================
# Mac OS X 10.7 (Lion) Runner - tenseven
# ============================================================================
# Fixed hostname for the 10.7 VM (resolved via mDNS/DNS)
LEGACY_TENSEVEN_HOSTNAME=tenseven-runner.local

# Unique runner registration token for this instance
RUNNER_TOKEN_TENSEVEN=

# Container and runner name (optional, defaults shown)
RUNNER_NAME_TENSEVEN=tenseven-runner

# Custom labels for this runner (optional)
CUSTOM_LABELS_TENSEVEN=

# ============================================================================
# Mac OS X 10.6 (Snow Leopard) Runner - tensix
# Uncomment and fill in to activate this runner
# ============================================================================
# LEGACY_TENSIX_HOSTNAME=tensix-runner.local
# RUNNER_TOKEN_TENSIX=
# RUNNER_NAME_TENSIX=tensix-runner
# CUSTOM_LABELS_TENSIX=

# ============================================================================
# Mac OS X 10.8 (Mountain Lion) Runner - teneight
# Uncomment and fill in to activate this runner
# ============================================================================
# LEGACY_TENEIGHT_HOSTNAME=teneight-runner.local
# RUNNER_TOKEN_TENEIGHT=
# RUNNER_NAME_TENEIGHT=teneight-runner
# CUSTOM_LABELS_TENEIGHT=

# ============================================================================
# Mac OS X 10.9 (Mavericks) Runner - tennine
# Uncomment and fill in to activate this runner
# ============================================================================
# LEGACY_TENNINE_HOSTNAME=tennine-runner.local
# RUNNER_TOKEN_TENNINE=
# RUNNER_NAME_TENNINE=tennine-runner
# CUSTOM_LABELS_TENNINE=

# ============================================================================
# Mac OS X 10.10 (Yosemite) Runner - tenten
# Uncomment and fill in to activate this runner
# ============================================================================
# LEGACY_TENTEN_HOSTNAME=tenten-runner.local
# RUNNER_TOKEN_TENTEN=
# RUNNER_NAME_TENTEN=tenten-runner
# CUSTOM_LABELS_TENTEN=

# ============================================================================
# SSH Key Setup Instructions
# ============================================================================
# 1. Extract the OLDMAC_KEY secret from GitHub repository secrets
# 2. Save it to ./ssh_keys/oldmac with restricted permissions:
#    echo "$OLDMAC_KEY" > ./ssh_keys/oldmac
#    chmod 600 ./ssh_keys/oldmac
# 3. Verify: ls -l ./ssh_keys/oldmac (should show -rw-------)

# ============================================================================
# Runner Token Generation
# ============================================================================
# Generate registration tokens on your workstation:
#
#   gh api repos/$GITHUB_OWNER/$GITHUB_REPO/actions/runners/registration-token --method POST --jq '.token'
#
# Each runner instance requires a unique token. Tokens expire after 1 hour.
# Keep tokens in .env file (which is gitignored for security).

# ============================================================================
# Workflow Usage Examples
# ============================================================================
# Target 10.5 runner in workflows:
#   runs-on: [self-hosted, tenfive]
#
# Target 10.7 runner in workflows:
#   runs-on: [self-hosted, tenseven]
#
# Target any legacy runner:
#   runs-on: [self-hosted, ssh-legacy-capable]

# ============================================================================
# Notes
# ============================================================================
# - The .env file is gitignored for security (never commit secrets/tokens)
# - SSH keys are mounted read-only into containers
# - Registration tokens expire after 1 hour; regenerate as needed
# - Private SSH keys must have 600 permissions
# - Each container instance runs independently with its own token

